# ZW Specification Gap Analysis

Working document to track gaps identified during final review. Delete when resolved.

## Gaps to Address

### 1. New Session Creation - Directory Behavior (Critical)
**Status**: Pending

The spec says "No Directory Change Before Attach" for *existing* sessions, but doesn't specify what happens for *new* sessions.

**Question**: When starting a new session in `~/Code/myapp`, does ZW:
- cd to `~/Code/myapp` first, then run `zellij attach -c <name>`?
- Or pass the directory to Zellij some other way?

---

### 2. Layout Discovery and Application (Critical)
**Status**: Pending

The spec says ZW presents existing Zellij layouts, but doesn't explain:
- Where does ZW find layouts? (typically `~/.config/zellij/layouts/`)
- How does ZW apply a layout when creating a session?

The Zellij Integration table is missing the layout flag.

---

### 3. Exited Session Discovery (Important)
**Status**: Pending

The spec mentions "EXITED" sessions but doesn't explain how ZW finds them:
- Does `zellij list-sessions` include exited sessions?
- Or does ZW scan `~/.cache/zellij/*/session_info/` directly?

Source material mentioned: `~/.cache/zellij/<version>/session_info/<session-name>/session-layout.kdl`

---

### 4. projects.json Structure (Important)
**Status**: Pending

The spec doesn't define the JSON format. Options:
- Minimal: just an array of paths
- Rich: objects with path, display name, last_used timestamp

Affects sorting, display, and whether projects have custom names.

---

### 5. Session Renaming Mechanism (Medium)
**Status**: Pending

Spec says "Session renaming is supported" but:
- What Zellij command renames a session?
- What's the UI flow?

---

### 6. Kill Confirmation (Medium)
**Status**: Pending

Original discussion mentioned "with confirmation" for killing sessions. Should there be one?

---

### 7. Current Directory Quick-Start (Medium)
**Status**: Pending

Original cx-design TUI had `[.] current directory` option. Missing from new TUI. Is it still wanted?

---

### 8. Attached Status Detection (Low)
**Status**: Pending

How does ZW determine if another client is attached? From `zellij list-sessions` output?
